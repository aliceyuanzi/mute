# CREATE TABLE `t_repayment_schedule` (
  `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
  `LoanOrderId` int(10) unsigned NOT NULL COMMENT '关联标的主体',
  `BusiNessPlatformId` int(10) unsigned NOT NULL COMMENT '关联平台主体',
  `UserId` int(10) unsigned NOT NULL COMMENT '关联客户主体',
  `Stage` tinyint(3) unsigned NOT NULL COMMENT '还款计划所属期数',
  `StartAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '本期还款计划起始日期',
  `DueAt` timestamp NULL DEFAULT NULL COMMENT '还款计划结束日期',
  `UserDueAt` timestamp NULL DEFAULT NULL COMMENT '用户应还款日期',
  `RepayAt` timestamp NULL DEFAULT NULL COMMENT '实际的扣款日期',
  `IsClear` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否还清，非零表示已还清',
  `CanClear` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否可通过充值款结清',
  `SerialNum` varchar(64) DEFAULT NULL COMMENT '扣款成功时的扣款流水号',
  `Capital` decimal(30,7) unsigned NOT NULL COMMENT '应还本金',
  `Interest` decimal(30,7) unsigned NOT NULL DEFAULT '0.0000000' COMMENT '应还利息',
  `Gratuity` decimal(30,7) unsigned NOT NULL DEFAULT '0.0000000' COMMENT '应还服务费',
  `Penalty` decimal(30,7) unsigned NOT NULL DEFAULT '0.0000000' COMMENT '应还罚息',
  `Compensation` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '违约金',
  `DebtInterest` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '罚息',
  `Amount` decimal(30,7) unsigned NOT NULL DEFAULT '0.0000000' COMMENT '应还总额',
  `CiticCanPay` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '融资人帐户可付金额',
  `RepaidCapital` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还本金',
  `RepaidInterest` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还利息',
  `RepaidGratuity` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还服务费',
  `RepaidPenalty` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还罚息',
  `RepaidCapitalCitic` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '充值账户实还本金',
  `RepaidInterestCitic` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '充值账户实还利息',
  `RepaidGratuityCitic` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '充值账户实还服务费',
  `RepaidPenaltyCitic` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '充值账户实还罚息',
  `RepaidAmount` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还总额',
  `RepaidAmountCitic` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '融资人帐户实付总额',
  `Exemption` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '协商后豁免的金额',
  `IsRepaidAdvance` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否由平台垫付，0 表示否，非零表示平台已垫付',
  `OverDue` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '已逾期天数',
  `Status` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '还款计划状态',
  `Uuid` varchar(32) DEFAULT NULL COMMENT 'UUID, 标识当前正在扣费的服务事务ID（逻辑事务）',
  `UpdatedType` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `IsDeprecated` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否被弃用',
  `CreateDate` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `LastUpdateDate` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后一次更新时间',
  `UserStartAt` timestamp NULL DEFAULT NULL COMMENT '用户还款起始日期',
  `PlatGratuity` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '应还第三方平台费用',
  `OwnGratuity` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '应还服务费用',
  `RepaidPlatGratuity` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还第三方费用，暂时不用',
  `RepaidOwnGratuity` decimal(30,7) NOT NULL DEFAULT '0.0000000' COMMENT '实际还服务费用，暂时不用',
  `DeductStatus` tinyint(3) NOT NULL DEFAULT '1' COMMENT '扣款状态。1.正常；0.状态未知',
  `PlatRepayId` varchar(64) DEFAULT NULL COMMENT '资金渠道还款期数ID',
  PRIMARY KEY (`Id`),
  KEY `IDX_TRS_01` (`OverDue`),
  KEY `IDX_TRS_10` (`UserId`,`OverDue`,`IsDeprecated`),
  KEY `IDX_TRS_09` (`CreateDate`),
  KEY `IDX_TRS_08` (`UserDueAt`,`LoanOrderId`,`Stage`),
  KEY `IDX_TRS_07` (`UserDueAt`,`StartAt`),
  KEY `IDX_TRS_05` (`DueAt`,`LoanOrderId`),
  KEY `IDX_TRS_04` (`LoanOrderId`,`Stage`,`UserDueAt`),
  KEY `IDX_TRS_03` (`RepayAt`,`Status`),
  KEY `IDX_TRS_02` (`IsClear`,`OverDue`),
  KEY `IDX_TRS_11` (`Status`),
  KEY `IDX_TRS_12` (`UserDueAt`,`OverDue`,`IsClear`),
  KEY `IDX_TRS_06` (`UserStartAt`)
) ENGINE=InnoDB AUTO_INCREMENT=3597714 DEFAULT CHARSET=utf8

